<!DOCTYPE html>
<html lang="en-us" class="scroll-smooth">
    <head><meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CHIP8</title>
<meta name="description" content="GitHub: chip8
Demo: N/A
I&rsquo;ve always been interested in emulation - it seemed incredible that we could bring back past hardware and software.">
<link rel="canonical" href="https://jwoos.com/projects/2019-03-09-go_chip8/">
<link rel="robots" href="/robots.txt" />

<link rel="stylesheet" href="https://jwoos.com/css/app.min.d915de4e3769d8a8f07787bd8c41c070c42b975a253c064f3b47be7a8422faaf.css" integrity="sha256-2RXeTjdp2Kjwd4e9jEHAcMQrl1olPAZPO0e+eoQi+q8=" ></head>
    <body class="max-w-screen-md px-10 mx-auto">
        <header class="flex flex-col sm:flex-row items-center gap-5 sm:gap-10 pt-16 py-12">
    

<div class="flex-none w-20 h-20 rounded-full overflow-hidden" >
    <a href="https://jwoos.com/">
        <img srcset="/images/profile-picture_hu4a6a454cc261c6515f2cb5e952f8336e_33555_80x80_fill_q90_box_smart1_3.png 80w" src="/images/profile-picture.png" width="150" height="150" alt="Jun Woo Shin">
    </a>
</div>

    <div class="flex flex-col gap-5">
    <a href="https://jwoos.com/">
    
    <h3 class="text-center sm:text-left text-4xl font-extrabold text-gray-800 ">Jun Woo Shin</h3>
    
</a>
    <nav>
    <ul class="flex flex-wrap justify-center uppercase text-xs font-semibold gap-7 text-gray-500 ">
        
        
        <li class="hover:text-gray-500"><a href="/">Home</a></li>
        
        <li class="hover:text-gray-500"><a href="/blog">Blog</a></li>
        
        <li class="hover:text-gray-500"><a href="/projects">Projects</a></li>
        
        <li class="hover:text-gray-500"><a href="/photography">Photography</a></li>
        
        <li class="hover:text-gray-500"><a href="/tags">Tags</a></li>
        
        <li class="hover:text-gray-500"><a href="/archive">Archive</a></li>
        
    </ul>
</nav>
    </div>
</header>
        <main id="content">
<article class="flex flex-col gap-10">
    <header class="flex flex-col gap-2">
        <h2 class="text-4xl leading-snug font-bold text-gray-900">CHIP8</h2>

        <div class="text-sm font-semibold text-gray-500 flex gap-3">
        
<time datetime="2019-03-09 00:00:00 &#43;0000 UTC" title="2019-03-09 00:00:00 &#43;0000 UTC">
    9 March 2019
</time>
        
        </div>
    </header>
    <section class="content text-lg text-gray-800">
    <p>GitHub: <a href="https://github.com/jwoos/go_chip8">chip8</a><br>
Demo: N/A</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<p>I&rsquo;ve always been interested in emulation - it seemed incredible that we could bring back past hardware and software. In fact I wanted to take a try at building my own - but before diving into the deep end I wanted to try something simple. CHIP8 was one of the recommended beginner emulator projects so I decided to dive in.</p>
<p>I read <a href="http://devernay.free.fr/hacks/chip8/C8TECH10.HTM">this reference</a> and based my implementation off of this. It had everything I needed!</p>
<h1 id="building-it">Building it</h1>
<p>The first thing to figure out was how I was going to structure the code. I had a <code>System</code> struct that handled almost everything. Looking back, I wish I had separated out the display and input. The struct had the system configuration options, registers, stack, and memory. The registers and memory were simply represented as a byte slice. However, for the stack I chose to write a wrapper around the slice and get rid of the stack pointer. The stack pointer was no longer needed as it became internal to the stack and I could just push and pop without worrying about the index.</p>
<p>It will loop listening for a halt signal on a channel - if it isn&rsquo;t received, it will read and run the next opcode. The clock speed is variable and can be set up to a maximum of 1000 Hz (1 ms/loop). The actual opcode execution is just a massive switch statement, mapping all the possible opcodes. All the instructions were implemented and have been tested to work (to a degree). The rest of the implementation is pretty boring except the few things I will point out below.</p>
<h2 id="timers">Timers</h2>
<p>The reference states that CHIP8 has two timers: sound and delay. These times decrease at a steady rate of 60 Hz (with no mention of clock speed). I initially, included it in the clock loop, but because of the variable clock speed this clearly wouldn&rsquo;t work. I chose to use a separate goroutine running on a ticker from <code>time</code> and decrementing the timers if necessary. This separated the two ideas and allowed them to coexist.</p>
<h2 id="display">Display</h2>
<p>For displaying, I used <a href="https://github.com/nsf/termbox-go">termbox</a>. It was very simple to use, especially when compared with ncurses. However, it was a bit minimalistic but for my project it was more than enough. I held a buffer of the display which I would then sync with the actual display after I finished updating it.</p>
<h2 id="input">Input</h2>
<p>I also used termbox for input, as it handles inputs to terminals. I have a separate goroutine running to handle inputs and set state. However, there is one thing that&rsquo;s a bit of a hack due to running in a terminal. It can&rsquo;t detect whether a button is being held down so I decided to use variable key timeouts. This can be set using a flag and determines for how long the key should be considered to be pressed down.</p>
<h1 id="conclusion">Conclusion</h1>
<p>Although this was probably very simple compared to actual hardware system, being an interpreter and all, I feel like it was a good start. Hopefully it helps when I&rsquo;m building my next emulator!</p>

    </section>
    
    
    

    
    

    <footer>
        

    </footer>
</article>

        </main><footer class="pt-5 pb-10 grid gap-3 sm:grid-cols-2">
    <div class="text-xs font-semibold text-gray-500 order-2 sm:order-1 ">
    © 2023 — <a class="hover:text-gray-500" href="https://jwoos.com/">Jun Woo Shin</a> <span class=" font-normal ">with</span> <a class="hover:text-gray-500" href="https://github.com/nixentric/Lowkey-Hugo-Theme" target="_blank" rel="noopener noreferrer">Lowkey</a>
</div>
    <div class="text-xs font-semibold text-gray-500 order-1 sm:order-2">
    <ul class="flex sm:justify-end gap-5">
    <li><a class="hover:text-gray-500" href="mailto:hello@jwoos.com" target="_blank" rel="noopener noreferrer">Email</a></li><li><a class="hover:text-gray-500" href="https://www.instagram.com/shin.junwoo/" target="_blank" rel="noopener noreferrer">Instagram</a></li><li><a class="hover:text-gray-500" href="https://github.com/jwoos" target="_blank" rel="noopener noreferrer">GitHub</a></li>
    </ul>
</div>
</footer></body>
</html>
